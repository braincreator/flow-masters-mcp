# API для создания и обновления курсов из внешнего контента

Этот API позволяет создавать и обновлять курсы, лендинги и автоворонки на основе предоставленного контента.

## Эндпоинты

### Создание курса

```
POST /api/v1/courses/create-from-content
```

### Обновление курса

```
PUT /api/v1/courses/update-from-content
```

## Формат запроса

Запрос должен содержать JSON-объект со следующей структурой:

```json
{
  "course": {
    // Данные курса (обязательно)
  },
  "landing": {
    // Данные лендинга (опционально)
  },
  "funnel": {
    // Данные воронки (опционально)
  },
  "language": "ru" // Язык контента (опционально, по умолчанию "ru")
}
```

### Структура данных курса

```json
{
  "title": "Название курса", // Обязательное поле
  "slug": "slug-kursa", // Опционально, будет сгенерирован автоматически
  "excerpt": "Краткое описание курса", // Опционально
  "description": "Полное описание курса", // Опционально
  "difficulty": "beginner", // Опционально, возможные значения: "beginner", "intermediate", "advanced"
  "estimatedDuration": "4 недели", // Опционально
  "status": "draft", // Опционально, возможные значения: "draft", "published", "archived"
  "learningOutcomes": [
    // Опционально
    "Что изучат студенты 1",
    "Что изучат студенты 2"
  ],
  "requirements": [
    // Опционально
    "Требование 1",
    "Требование 2"
  ],
  "targetAudience": [
    // Опционально
    "Целевая аудитория 1",
    "Целевая аудитория 2"
  ],
  "modules": [
    // Обязательное поле, минимум 1 модуль
    {
      "title": "Название модуля", // Обязательное поле
      "description": "Описание модуля", // Опционально
      "order": 1, // Опционально, порядковый номер
      "lessons": [
        // Обязательное поле, минимум 1 урок
        {
          "title": "Название урока", // Обязательное поле
          "description": "Описание урока", // Опционально
          "content": "Содержимое урока", // Опционально
          "duration": "30 минут", // Опционально
          "type": "video", // Опционально, возможные значения: "video", "text", "quiz", "assignment"
          "order": 1 // Опционально, порядковый номер
        }
      ]
    }
  ],
  "featuredImage": "media_id", // Опционально, ID медиа-файла
  "author": "user_id" // Опционально, ID автора
}
```

### Структура данных лендинга

```json
{
  "title": "Название лендинга", // Опционально
  "slug": "slug-lendinga", // Опционально
  "hero": {
    // Опционально
    "heading": "Заголовок героя",
    "subheading": "Подзаголовок героя",
    "ctaText": "Текст кнопки",
    "backgroundImage": "media_id" // ID медиа-файла
  },
  "sections": [
    // Опционально
    {
      "type": "features", // Тип секции
      "content": {
        // Содержимое секции
        "heading": "Заголовок секции",
        "features": [
          {
            "title": "Название фичи",
            "description": "Описание фичи",
            "icon": "icon_name"
          }
        ]
      }
    }
    // Другие секции
  ]
}
```

### Структура данных воронки

```json
{
  "name": "Название воронки", // Опционально
  "steps": [
    // Опционально
    {
      "name": "Название шага",
      "id": "step_id",
      "triggerType": "pageview", // Тип триггера
      "content": {} // Дополнительные данные шага
    }
  ],
  "emailSequence": [
    // Опционально
    {
      "subject": "Тема письма",
      "content": "Содержимое письма",
      "delay": 0, // Задержка в днях
      "triggerEvent": "signup" // Событие-триггер
    }
  ]
}
```

## Пример запроса

```json
{
  "course": {
    "title": "Основы искусственного интеллекта",
    "excerpt": "Введение в мир ИИ: от базовых концепций до практического применения",
    "difficulty": "beginner",
    "modules": [
      {
        "title": "Введение в ИИ",
        "lessons": [
          {
            "title": "Что такое искусственный интеллект",
            "duration": "30 минут"
          }
        ]
      }
    ]
  },
  "language": "ru"
}
```

## Формат ответа

```json
{
  "success": true,
  "data": {
    "course": {
      // Данные созданного курса
    },
    "modules": [
      // Данные созданных модулей
    ],
    "landing": {
      // Данные созданного лендинга (если был запрошен)
    },
    "funnel": {
      // Данные созданной воронки (если была запрошена)
    }
  },
  "message": "Course created successfully from provided content"
}
```

## Обработка ошибок

В случае ошибки API вернет ответ со статусом 500 и следующей структурой:

```json
{
  "success": false,
  "error": "Описание ошибки"
}
```

## Примечания

1. Все поля, кроме обязательных, являются опциональными.
2. Если не указан `slug`, он будет сгенерирован автоматически на основе заголовка.
3. Для создания лендинга и воронки необходимо предоставить соответствующие объекты в запросе.
4. Система поддерживает локализацию контента на русском и английском языках.
