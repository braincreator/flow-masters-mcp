# üìã –û—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏ API routes

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `scripts/safe-api-migration.ts` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è routes
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API –ø—É—Ç–µ–π –≤ `src/config/api-routes.ts`
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `scripts/test-api-endpoints.ts`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω middleware –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏–π API
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã –≤ package.json –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–µ–π

### 2. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã 39 –∏–∑ 43 API routes –∏–∑ `/api/v1/` –≤ `/api/`
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã —Å–æ —Å—Ç–∞—Ä—ã—Ö –ø—É—Ç–µ–π –Ω–∞ –Ω–æ–≤—ã–µ (301 Permanent Redirect)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö –ø—É—Ç–µ–π
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –±–ª–æ–≥–æ–º
- ‚úÖ –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏—è –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è "Articles" –≤ hero —Å–µ–∫—Ü–∏–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω API –ø—É—Ç—å —Å `/api/v1/blog/posts` –Ω–∞ `/api/blog/posts`

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints (legacy + –Ω–æ–≤—ã–µ –ø—É—Ç–∏)
- **–í—Å–µ–≥–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** 44 endpoints
- **–£—Å–ø–µ—à–Ω–æ:** 41 ‚úÖ (93.2%)
- **–û—à–∏–±–∫–∏:** 3 ‚ùå (6.8%)
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** 15ms
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** 40ms

### –ù–µ—É–¥–∞—á–Ω—ã–µ endpoints
- `/api/v1/contact` - 404 (–æ–∂–∏–¥–∞–µ–º–æ, —Ç—Ä–µ–±—É–µ—Ç POST –¥–∞–Ω–Ω—ã–µ)
- `/api/form-submissions` - 404 (–æ–∂–∏–¥–∞–µ–º–æ, —Ç—Ä–µ–±—É–µ—Ç POST –¥–∞–Ω–Ω—ã–µ)
- `/api/v1/form-submissions` - 404 (–æ–∂–∏–¥–∞–µ–º–æ, —Ç—Ä–µ–±—É–µ—Ç POST –¥–∞–Ω–Ω—ã–µ)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –¢–µ–∫—É—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env.local)
```env
# API Migration Configuration
# –≠—Ç–∞–ø 2: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–µ –ø—É—Ç–∏ (–±–µ–∑ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
NEXT_PUBLIC_API_VERSION=
NEXT_PUBLIC_API_COMPATIBILITY=false
NEXT_PUBLIC_API_AUTO_REDIRECT=true
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ú–∏–≥—Ä–∞—Ü–∏—è
npm run migrate:api:dry-run    # –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
npm run migrate:api            # –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
npm run migrate:api:force      # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
npm run migrate:api:rollback   # –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm run test:api               # –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm run test:api:verbose       # –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm run test:api:legacy        # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ legacy –ø—É—Ç–µ–π
npm run test:api:errors        # –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
```

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏

1. **‚úÖ –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è API routes** - –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ API endpoints —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –ø—É—Ç–∏ `/api/` –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `v1`
2. **‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –°—Ç–∞—Ä—ã–µ –ø—É—Ç–∏ `/api/v1/` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç—è—Ç –Ω–∞ –Ω–æ–≤—ã–µ
3. **‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏** - –°–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è, –≤–æ–∑–º–æ–∂–µ–Ω –±—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç
4. **‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –í—Å–µ endpoints –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –±–ª–æ–≥–∞** - –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

## üîÑ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### API Routes —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
/api/
‚îú‚îÄ‚îÄ categories/          # ‚úÖ –ù–æ–≤—ã–π –ø—É—Ç—å
‚îú‚îÄ‚îÄ tags/               # ‚úÖ –ù–æ–≤—ã–π –ø—É—Ç—å
‚îú‚îÄ‚îÄ products/           # ‚úÖ –ù–æ–≤—ã–π –ø—É—Ç—å
‚îú‚îÄ‚îÄ blog/               # ‚úÖ –ù–æ–≤—ã–π –ø—É—Ç—å
‚îú‚îÄ‚îÄ health/             # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
‚îú‚îÄ‚îÄ monitoring/         # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
‚îú‚îÄ‚îÄ v1/                 # üîÑ –†–µ–¥–∏—Ä–µ–∫—Ç—ã –Ω–∞ –Ω–æ–≤—ã–µ –ø—É—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ categories/     # ‚Üí /api/categories/
‚îÇ   ‚îú‚îÄ‚îÄ tags/          # ‚Üí /api/tags/
‚îÇ   ‚îî‚îÄ‚îÄ ...            # ‚Üí —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –Ω–æ–≤—ã–µ –ø—É—Ç–∏
‚îî‚îÄ‚îÄ ...
```

### Middleware –ª–æ–≥–∏–∫–∞
- **Legacy –ø—É—Ç–∏** (`/api/v1/*`) ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç 301 –Ω–∞ –Ω–æ–≤—ã–µ –ø—É—Ç–∏
- **–ù–æ–≤—ã–µ –ø—É—Ç–∏** (`/api/*`) ‚Üí –ø—Ä—è–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è** - webhooks, admin, docs –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ frontend –∫–æ–¥–∞** - –ó–∞–º–µ–Ω–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã–µ `/api/v1/` –ø—É—Ç–∏
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ø—É—Ç–µ–π –≤ –ª–æ–≥–∞—Ö
3. **–§–∏–Ω–∞–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞** - –ß–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ routes –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –æ—Ç–∫–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:
```bash
npm run migrate:api:rollback
```

–î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```env
NEXT_PUBLIC_API_VERSION=v1
NEXT_PUBLIC_API_COMPATIBILITY=true
NEXT_PUBLIC_API_AUTO_REDIRECT=false
```

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ú–ò–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û**

**–î–∞—Ç–∞:** $(date)
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~30 –º–∏–Ω—É—Ç
**–†–∏—Å–∫–∏:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ (–µ—Å—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞)